<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <title id="title">Set Proxy</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
        }

        .form-group {
            margin-bottom: 15px;
        }

        label {
            display: block;
            margin-bottom: 5px;
        }

        input {
            width: 100%;
            padding: 8px;
            box-sizing: border-box;
        }

        button {
            padding: 10px 15px;
            background-color: #007BFF;
            color: #fff;
            border: none;
            cursor: pointer;
        }

        button:hover {
            background-color: #0056b3;
        }
    </style>
    <script src="assets/jquery.min.js"></script>
</head>

<body>
    <h1 id="title-heading">Set Proxy</h1>
    <form id="myForm">
        <div class="form-group">
            <label for="proxyType" id="proxyTypeLabel">Proxy Type:</label>
            <select id="proxyType">
                <option value="http">HTTP</option>
                <option value="socks5">SOCKS5</option>
            </select>
        </div>
        <div class="form-group">
            <label for="proxyUrl" id="proxyUrlLabel">Proxy URL:</label>
            <input type="text" id="proxyUrl" placeholder="" name="proxyUrl">
        </div>
        <div class="form-group">
            <label for="proxyPort" id="proxyPortLabel">Proxy Port:</label>
            <input type="text" id="proxyPort" placeholder="" name="proxyPort">
        </div>
        <div class="form-group">
            <label for="proxyDomain" id="proxyDomainLabel">Domain:</label>
            <input type="text" id="proxyDomain" placeholder="" name="proxyDomain">
        </div>
        <div class="form-group">
            <label for="proxyUsername" id="proxyUsernameLabel">Username:</label>
            <input type="text" id="proxyUsername" placeholder="" name="proxyUsername">
        </div>
        <div class="form-group">
            <label for="proxyPassword" id="proxyPasswordLabel">Password:</label>
            <input type="password" id="proxyPassword" placeholder="" name="proxyPassword">
        </div>

        <button id="save">Set Proxy</button>
        <!-- <input type="submit" value="Set Proxy" id="save"> -->
    </form>

    <script>
        // 请求语言包数据
        window.electron.requestLocale();
        let Proxy = JSON.parse(localStorage.getItem("Proxy")) == "" ? "" : JSON.parse(localStorage.getItem("Proxy"));

        // 遍历数组，并将键值对添加到对象中
        console.log(Proxy, "Proxy")
        if (Proxy !== 'null') {
            if (Proxy["proxyUrl"] == "proxyUrl") {
                document.getElementById('proxyUrlLabel').value = Proxy["proxyUrl"].value;
            } else if (Proxy["proxyPort"] == "proxyPort") {
                document.getElementById('proxyPortLabel').value = Proxy["proxyPort"].value;
            } else if (Proxy["proxyDomain"] == "proxyDomain") {
                document.getElementById('proxyDomainLabel').value = Proxy["proxyDomain"].value;
            } else if (Proxy["proxyUsername"] == "proxyUsername") {
                document.getElementById('proxyUsernameLabel').value = Proxy["proxyUsername"].value;
            } else {
                document.getElementById('proxyPasswordLabel').value = Proxy["proxyPassword"].value;
            }
        }
        // 接收并设置语言包数据
        window.electron.onSetLocale((localeData) => {
            $('#save').text(localeData.Save);
            $('#title').text(localeData.Proxy.title);
            $('#title-heading').text(localeData.Proxy.title);
            $('#proxyTypeLabel').text(localeData.Proxy.proxyType);
            $('#proxyUrlLabel').text(localeData.Proxy.proxyUrl);
            $('#proxyPortLabel').text(localeData.Proxy.proxyPort);
            $('#proxyDomainLabel').text(localeData.Proxy.proxyDomain);
            $('#proxyUsernameLabel').text(localeData.Proxy.proxyUsername);
            $('#proxyPasswordLabel').text(localeData.Proxy.proxyPassword);
        });

        // 表单提交时的事件处理程序
        // 表单提交时的事件处理程序
        $('#myForm').submit(function (event) {
            event.preventDefault(); // 阻止表单提交默认行为
            const formData = $(this).serializeArray();
            const obj = {};
            $.each(formData, function (index, item) {
                obj[item.name] = item.value;
            });
            console.log(obj, "obj");
            localStorage.setItem("Proxy", JSON.stringify(obj))
            // 这里可以执行其他操作，比如发送 AJAX 请求等
        });
    </script>
</body>

</html>